<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>Fox Ciel is observing celestial objects in the night sky.
She is interested in two types of stars: red dwarves and blue giants.
<br></br>
<br></br>
For the purpose of this problem the sky is a plane and each star is a point in the plane.
Note that the constraints enforce that all points are distinct and no three points lie on the same line.
<br></br>
<br></br>
The blue giants are always visible.
For each valid i, there is a blue star at (<b>blueX</b>[i], <b>blueY</b>[i]).
<br></br>
<br></br>
The red dwarves are sometimes invisible.
For each valid i, there is a red star at (<b>redX</b>[i], <b>redY</b>[i]), but this star is only visible with probability (<b>prob</b>[i]/1000).
All of those random choices are mutually independent.
<br></br>
<br></br>
Fox Ciel thinks the sky is beautiful if all blue stars are located inside the convex hull of all visible red stars.
Return the probability of this event.</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>BichromeSky</td></tr><tr><td>Method:</td><td>totallyCovered</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double totallyCovered(vector &lt;int&gt; redX, vector &lt;int&gt; redY, vector &lt;int&gt; prob, vector &lt;int&gt; blueX, vector &lt;int&gt; blueY)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>The answer will be considered correct if the absolute error or the relative error is at most 1e-9.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>redX</b> will contain between 3 and 100 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>redX</b>, <b>redY</b> and <b>prob</b> will contain the same number of elements.</td></tr><tr><td align="center" valign="top">-</td><td><b>blueX</b> will contain between 3 and 100 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>blueX</b> and <b>blueY</b> will contain the same number of elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element in <b>redX</b>, <b>redY</b>, <b>blueX</b> and <b>blueY</b> will be between -1,000,000 and 1,000,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element in <b>prob</b> will be between 1 and 1000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Among all points (blue and red), no two points will be at the same position, and no three points will be on the same line.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{3,-3,0}</pre></td></tr><tr><td><pre>{-1,-1,2}</pre></td></tr><tr><td><pre>{400,500,600}</pre></td></tr><tr><td><pre>{1,0,-1}</pre></td></tr><tr><td><pre>{0,1,0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.12</pre></td></tr><tr><td><table><tr><td colspan="2">There are three blue points and up to three red points in the sky.<br></br>
The convex hull of all red points contains all blue points if and only if all three red points appear.<br></br>
The probability of that event is 0.4 * 0.5 * 0.6 = 0.12.  
<br></br>
<br></br>
<img src="http://www.topcoder.com/contest/problem/BichromeSky/fig0.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{3,-3,3,-3}</pre></td></tr><tr><td><pre>{3,3,-3,-3}</pre></td></tr><tr><td><pre>{200,300,400,500}</pre></td></tr><tr><td><pre>{0,1,-1}</pre></td></tr><tr><td><pre>{-1,-2,-2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.088</pre></td></tr><tr><td><table><tr><td colspan="2">There are 3 cases in which the convex hull of all red points contains all blue points: {A, B, C, D}, {A, C, D}, {B, C, D}.<br></br>
So both C and D must appear, while at least one of {A, B} must appear.<br></br>
The probability is 0.4 * 0.5 * (1 - (1-0.2)*(1-0.3)) = 0.088.
<br></br>
<br></br>
<img src="http://www.topcoder.com/contest/problem/BichromeSky/fig1.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{3,-3,0}</pre></td></tr><tr><td><pre>{-1,-1,2}</pre></td></tr><tr><td><pre>{400,500,600}</pre></td></tr><tr><td><pre>{1,0,-1,123456}</pre></td></tr><tr><td><pre>{0,1,0,-654321}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.0</pre></td></tr><tr><td><table><tr><td colspan="2">Even if we get all red points, we can't cover the blue one at (123456,-654321).</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,-2,-3,-4,-3,-2,0,2,3,4,3,2}</pre></td></tr><tr><td><pre>{4,3,2,0,-2,-3,-4,-3,-2,0,2,3}</pre></td></tr><tr><td><pre>{501,502,503,504,505,506,507,508,509,510,511,512}</pre></td></tr><tr><td><pre>{1,-1,-1,1}</pre></td></tr><tr><td><pre>{1,1,-1,-1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.6555037822772468</pre></td></tr><tr><td><table><tr><td colspan="2"><img src="http://www.topcoder.com/contest/problem/BichromeSky/fig3.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,1,-3,3}</pre></td></tr><tr><td><pre>{0,4,-2,-2}</pre></td></tr><tr><td><pre>{200,300,400,500}</pre></td></tr><tr><td><pre>{0,-1,1}</pre></td></tr><tr><td><pre>{1,-1,-1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.06</pre></td></tr><tr><td><table><tr><td colspan="2"><img src="http://www.topcoder.com/contest/problem/BichromeSky/fig4.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{10,-17,12,-11,-13,-10,-15,14,-4,2}</pre></td></tr><tr><td><pre>{8,17,-13,-19,-14,11,17,8,-8,-15}</pre></td></tr><tr><td><pre>{412,360,656,876,984,160,368,873,223,128}</pre></td></tr><tr><td><pre>{-9,-3,6,-9,-5,4,-3,10,-7,2}</pre></td></tr><tr><td><pre>{-6,10,10,-9,-10,-6,2,-10,-9,6}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.34037052019900405</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
